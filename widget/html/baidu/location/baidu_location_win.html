<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>APP</title>
    <link rel="stylesheet" type="text/css" href="../../../css/aui.css" />
</head>
<style type="text/css">
.active {
    background-color: #f4f4f4;
}
</style>
<body>
    <header class="aui-bar aui-bar-nav aui-bar-dark" id="aui-header">
        <a class="aui-btn aui-btn-dark aui-pull-left" id="back">
            <span class="aui-iconfont aui-icon-left">返回</span>
        </a>
        <div class="aui-title">地图定位</div>
    </header>
</body>
<script type="text/javascript" src="../../../script/api.js" ></script>
<script type="text/javascript">
    //全局变量
    var winName = "";
    var frameName = "";
    apiready = function(){
        var winHeight = api.winHeight;
        var header = $api.byId('aui-header');
        $api.fixStatusBar(header);
        var headerPos = $api.offset(header);
        var body_h = $api.offset($api.dom('body')).h;
        var destLat = api.pageParam.destLat;
        var destLon = api.pageParam.destLon;
        var comeFrom = api.pageParam.comeFrom;
        winName = api.pageParam.winName;
        frameName = api.pageParam.frameName;
        // 从调查评议模块进入
        if (comeFrom == 'dcpy') {
            api.openFrame({
                name: 'baidu_location_frm',
                url: 'baidu_location_frm.html',
                bounces: false,
                vScrollBarEnabled:false,
                pageParam : {
                    comeFrom: comeFrom,
                    destLat: destLat,
                    destLon: destLon,
                    height: headerPos.h - 40
                },
                rect: {
                    x: 0,
                    y: headerPos.h,
                    w: 'auto',
                    h: 'auto'
                }
            });
        } else {
            api.openFrame({
                name: 'baidu_location_menu_frm',
                url: 'baidu_location_menu_frm.html',
                bounces: false,
                pageParam : {
                    destLat: destLat,
                    destLon: destLon,
                    winName: winName,
                    frameName: frameName
                },
                rect: {
                    x: 0,
                    y: headerPos.h,
                    w: 'auto',
                    h: '40'
                }
            });
            api.openFrame({
                name: 'baidu_location_frm',
                url: 'baidu_location_frm.html',
                bounces: true,
                vScrollBarEnabled:false,
                pageParam : {
                    destLat: destLat,
                    destLon: destLon,
                    height:headerPos.h,
                    winName: winName,
                    frameName: frameName
                },
                rect: {
                    x: 0,
                    y: headerPos.h+40,
                    w: 'auto',
                    h: '230'
                }
            });
            api.openFrame({
                name: 'baidu_location_result_frm',
                url: 'baidu_location_result_frm.html',
                bounces: true,
                vScrollBarEnabled:false,
                rect: {
                    x: 0,
                    y: headerPos.h + 270,
                    w: 'auto',
                    h: 'auto'
                },
                pageParam:{
                    height:headerPos.h,
                    destLat: destLat,
                    destLon: destLon,
                    winName: winName,
                    frameName: frameName
                }
            });
        }
        $api.addEvt($api.byId('back'), 'click', function(){
            api.closeWin();
        });
    };
</script>
</html>
