<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="./css/aui.css" />
    <link rel="stylesheet" type="text/css" href="./css/jq-base.css" />

</head>

<body>
    <header class="aui-bar aui-bar-nav" id="aui-header">
    </header>
    <footer class="aui-bar aui-bar-tab aui-border-t" id="footer">
        <div class="aui-bar-tab-item aui-active" id="homepage" tapmode>
            <i class="aui-iconfont aui-icon-home"></i>
            <div class="aui-bar-tab-label">首页</div>
        </div>
        <div class="aui-bar-tab-item" id="handle" tapmode>
            <i class="aui-iconfont aui-icon-edit"></i>
            <div class="aui-bar-tab-label">办理</div>
        </div>
        <div class="aui-bar-tab-item" id="query" tapmode>
            <i class="aui-iconfont aui-icon-search"></i>
            <div class="aui-bar-tab-label">查询</div>
        </div>
        <div class="aui-bar-tab-item" id="static" tapmode>
            <!-- <div class="aui-badge">99</div> -->
            <i class="aui-iconfont aui-icon-menu"></i>
            <div class="aui-bar-tab-label">统计</div>
        </div>
        <div class="aui-bar-tab-item" id="mine" tapmode>
            <!-- <div class="aui-dot"></div> -->
            <i class="aui-iconfont aui-icon-my"></i>
            <div class="aui-bar-tab-label">我的</div>
        </div>
    </footer>
</body>
<script type="text/javascript" src="./script/api.js"></script>
<script type="text/javascript" src="./script/aui-tab.js"></script>
<script type="text/javascript" src="./script/jq-module.js"></script>
<script type="text/javascript">
    apiready = function() {
        api.parseTapmode();


        var footer_h = $api.offset($api.dom('footer')).h;
        api.openFrame({
            name: 'homepage_frm',
            url: './html/homepage/homepage_frm.html',
            bounces: false,
            allowEdit: true,
            rect: {
                x: 0,
                y: 0,
                w: 'auto',
                h: api.winHeight - footer_h
            }
        })
        //应用退出事件监听
        var flag = false;
        api.addEventListener({
            name: 'keyback'
        }, function(ret, err) {
            if (false == flag) {
                api.toast({
                    msg: '再按一次退出应用',
                    duration: 2000,
                    location: 'bottom'
                });
                flag = true;
                setTimeout(function() {
                    flag = false;
                }, 2000);
            } else {
                api.closeWidget({
                    silent: true
                });
            }
        });
    };



    var tab = new auiTab({
        element: document.getElementById("footer")
    }, function(ret) {
        if (ret) {
            var footer_h = $api.offset($api.dom('footer')).h;
            api.openFrame({
                name: ret.dom.id + '_frm',
                url: './html/' + ret.dom.id + '/' + ret.dom.id + '_frm.html',
                bounces: false,
                rect: {
                    x: 0,
                    y: 0,
                    w: 'auto',
                    h: api.winHeight - footer_h
                }
            })
        }
    });

    function closeWin(){
        api.closeWin();
    }
</script>

</html>
